白屏检测方案的实现流程
//1.页面中间取 17 个采样点，利用 elementsFromPoint api 获取该坐标点下的 HTML 元素
//2.定义属于容器元素的集合，如 ['html', 'body', '#app', '#root']
//3.判断 17 这个采样点是否在该容器集合中。说白了，就是判断采样点有没有内容；如果没有内容，该点的 dom 元素还是容器元素，若 17 个采样点都没有内容则算作白屏
//4、若初次判断是白屏，开启轮询检测，来确保白屏检测结果的正确性，直到页面的正常渲染

白屏检测的难点
//1.白屏原因的不确定
导致白屏的原因，大致分两种：资源加载错误、代码执行错误
//2.前端渲染方式的多样性
前端页面渲染方式有多种，比如 客户端渲染 CSR 、服务端渲染 SSR 、静态页面生成 SSG 等，每种模式各不相同，白屏发生的情况也不尽相同很难用一种统一的标准去判断页面是否白了

技术方案调研
//1.检测根节点是否渲染
原理很简单，在当前主流 SPA 框架下，DOM 一般挂载在一个根节点之下（比如 <div id="app"></div> ），发生白屏后通常是根节点下所有 DOM 被卸载，该方法通过检测根节点下是否挂载 DOM，若无则证明白屏。这是简单明了且有效的方案，但缺点也很明显：其一切建立在 白屏 === 根节点下 DOM 被卸载 成立的前提下，缺点是通用性较差，对于有骨架屏的情况束手无策

//2.Mutation Observer 监听 DOM 变化
通过此 API 监听页面 DOM 变化，并告诉我们每次变化的 DOM 是被增加还是删除。
但这个方案有几个缺陷：
1）白屏不一定是 DOM 被卸载，也有可能是压根没渲染，且正常情况也有可能大量 DOM 被卸载
2）遇到有骨架屏的项目，若页面从始至终就没变化，一直显示骨架屏，这种情况 Mutation Observer 也束手无策

//3.页面截图检测
整体流程：对页面进行截图，将截图与一张纯白的图片做对比，判断两者是否足够相似
但这个方案有几个缺陷：
1、方案较为复杂，性能不高；一方面需要借助 canvas 实现前端截屏，同时需要借助复杂的算法对图片进行对比
2、通用性较差，对于有骨架屏的项目，对比的样张要由纯白的图片替换成骨架屏的截图

//4.采样对比
该方法是对页面取关键点，进行采样对比，在准确性、易用性等方面均表现良好，也是最终采用的方案，对于有骨架屏的项目，通过对比前后获取的 dom 元素是否一致，来判断页面是否变化。

采样对比
//1.白屏修正机制
若首次检测页面为白屏后，任务还没有完成，特别是手机端的项目，有可能是用户网络环境不好，关键的 JS 资源或接口请求还没有返回，导致的页面白屏。
需要使用轮询检测，来确保白屏检测结果的正确性，直到页面的正常渲染，这就是白屏修正机制。
//2.骨架屏
对于有骨架屏的页面，用户打开页面后，先看到骨架屏，然后再显示正常的页面，来提升用户体验；但如果页面从始至终都显示骨架屏，也算是白屏的一种。
//3.骨架屏的原理
无论 vue 还是 react，页面内容都是挂载到根节点上。常见的骨架屏插件，就是基于这种原理，在项目打包时将骨架屏的内容直接放到 html 文件的根节点中
//4.骨架屏的白屏检测
上面的白屏检测方案对有骨架屏的项目失灵了，虽然页面一直显示骨架屏，但判断结果页面不是白屏，不符合我们的预期,需要通过外部传参明确的告诉 SDK，该页面是不是有骨架屏，如果有骨架屏，通过对比前后获取的 dom 元素是否一致，来实现骨架屏的白屏检测。
